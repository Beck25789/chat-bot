<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f2f4f8;
      margin: 0;
      padding: 20px;
    }

    form {
      max-width: 900px;
      margin: auto;
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }

    fieldset {
      border: none;
    }

    legend {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      color: #1a237e;
    }

    .item {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: #333;
    }

    input[type="text"],
    input[type="datetime-local"],
    select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
      box-sizing: border-box;
    }

    .input-groups {
      display: flex;
      gap: 20px;
    }

    .width50 {
      flex: 1;
    }

    fieldset > legend {
      color: #3949ab;
      font-size: 18px;
    }

    fieldset label {
      font-weight: normal;
    }

    button[type="submit"] {
      background-color: #1e88e5;
      color: white;
      padding: 12px 25px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button[type="submit"]:hover {
      background-color: #1565c0;
    }

    .note-fieldset {
      border: 1px solid #ccc;
      padding: 15px;
      border-radius: 8px;
      background: #f9f9f9;
    }

    .note-fieldset legend {
      font-weight: bold;
      font-size: 16px;
      color: #2e3c6b;
    }
  </style>
</head>

<body>

<script>
  window.addEventListener('DOMContentLoaded', async () => {
    try {
      const res = await fetch('/me');
      if (!res.ok) throw new Error('Unauthorized');

      const data = await res.json();
      document.getElementById('name').value = data.name || '';
      document.getElementById('phone').value = data.phone || '';
      document.getElementById('userId').value = data.id || '';

      document.getElementById('name').readOnly = true;
      document.getElementById('phone').readOnly = true;
    } catch (err) {
      alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
      window.location.href = '/auth';
    }
  });
</script>

<form action="/submit" method="POST">
  <fieldset>
    <legend>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</legend>

    <!-- ‡∏´‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î‡πÅ‡∏•‡∏∞ HN -->
    <div class="item input-groups">
      <div class="width50">
        <label for="room_id">‡∏´‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</label>
        <select name="room_id" id="room_id">
          <option value="8">‡∏´‡πâ‡∏≠‡∏á SMC</option>
          <option value="5">‡∏´‡πâ‡∏≠‡∏á1 ‡∏ä‡∏±‡πâ‡∏ô1</option>
          <option value="1">‡∏´‡πâ‡∏≠‡∏á1 ‡∏ä‡∏±‡πâ‡∏ô4</option>
          <option value="6">‡∏´‡πâ‡∏≠‡∏á2 ‡∏ä‡∏±‡πâ‡∏ô1</option>
          <option value="2">‡∏´‡πâ‡∏≠‡∏á2 ‡∏ä‡∏±‡πâ‡∏ô4</option>
          <option value="7">‡∏´‡πâ‡∏≠‡∏á3 ‡∏ä‡∏±‡πâ‡∏ô1</option>
          <option value="3">‡∏´‡πâ‡∏≠‡∏á3 ‡∏ä‡∏±‡πâ‡∏ô4 EMERGENCY</option>
          <option value="4">‡∏´‡πâ‡∏≠‡∏á4 ‡∏ä‡∏±‡πâ‡∏ô4</option>
        </select>
      </div>
      <div class="width50">
        <label for="attendees">HN</label>
        <input name="attendees" id="attendees" type="text">
      </div>
    </div>

    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ -->
    <div class="item"><label for="topic">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label><input type="text" name="topic" id="topic"></div>
    <div class="item"><label for="age">‡∏≠‡∏≤‡∏¢‡∏∏</label><input name="age" id="age" type="text"></div>
    <div class="item"><label for="diagnosis">Diagnosis</label><input type="text" name="diagnosis" id="diagnosis"></div>
    <div class="item"><label for="operation">Operation</label><input type="text" name="operation" id="operation"></div>
    <div class="item"><label for="bloodcomponent">Blood Component</label><input type="text" name="bloodcomponent" id="bloodcomponent"></div>
    <div class="item"><label for="currentdrug">Current Drug</label><input type="text" name="currentdrug" id="currentdrug"></div>

    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á -->
    <div class="item input-groups">
      <div class="width50">
        <label for="name">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</label>
        <input type="text" name="name" id="name" readonly>
      </div>
      <div class="width50">
        <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
        <input type="text" name="phone" id="phone" readonly>
      </div>
    </div>
    <input type="hidden" name="userId" id="userId">

    <!-- ‡πÅ‡∏û‡∏ó‡∏¢‡πå / ‡πÅ‡∏ú‡∏ô‡∏Å / NPO -->
    <div class="item">
        <label for="use">‡πÅ‡∏û‡∏ó‡∏¢‡πå</label>
        <select name="use" id="use">
          <option value="1" selected="">‡∏™‡∏∏‡∏ò‡∏±‡∏ç‡∏ç‡∏≤ ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ä‡∏±‡∏¢‡∏ß‡∏á‡∏®‡πå</option>
          <option value="10">‡∏à‡∏ï‡∏∏‡∏û‡∏• ‡πÇ‡∏™‡∏ß‡∏¥‡∏£‡∏±‡∏ä‡∏ô‡πå</option>
          <option value="11">‡∏≠‡∏†‡∏¥‡∏ß‡∏¥‡∏ä ‡∏°‡∏á‡∏Ñ‡∏•‡∏Å‡∏≥‡∏ò‡∏£</option>
          <option value="12">‡∏≠‡∏∏‡∏Å‡∏§‡∏©‡∏è‡πå ‡∏™‡πà‡∏á‡πÑ‡∏û‡∏ö‡∏π‡∏•‡∏¢‡πå</option>
          <option value="13">‡∏à‡∏±‡∏ô‡∏ó‡∏ô‡∏≤ ‡∏à‡∏á‡∏û‡∏¥‡∏û‡∏±‡∏ô‡∏ò‡πå</option>
          <option value="14">‡∏†‡∏ß‡∏±‡∏ô‡∏ï‡∏µ ‡∏Ç‡∏±‡∏ô‡∏°‡∏∞‡∏•‡∏¥</option>
          <option value="15">‡∏®‡∏¥‡∏ß‡∏∞‡∏ô‡∏±‡∏ô‡∏ó‡πå ‡∏®‡∏¥‡∏ß‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏∏‡∏•</option>
          <option value="16">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏¥‡∏ï ‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏∞</option>
          <option value="17">‡∏™‡∏±‡∏ô‡∏ï‡∏¥‡∏†‡∏≤‡∏û ‡∏û‡∏∏‡∏ó‡∏ò‡∏ô‡∏¥‡∏°‡∏ô‡∏ï‡πå</option>
          <option value="18">‡∏ß‡∏¥‡∏ß‡∏£‡∏ì‡πå ‡∏•‡∏µ‡∏•‡∏≤‡∏õ‡∏¥‡∏¢‡∏ß‡∏±‡∏í‡∏ô‡πå</option>
          <option value="19">‡∏£‡∏≤‡∏ä‡∏£‡∏±‡∏ï‡∏ô‡πå ‡∏â‡πâ‡∏á‡∏ó‡∏±‡∏ö</option>
          <option value="2">‡∏õ‡∏è‡∏¥‡∏û‡∏±‡∏ó‡∏ò‡πå ‡∏à‡∏¥‡∏ô‡∏∞‡∏ò‡∏£‡∏£‡∏°</option>
          <option value="20">‡∏Ñ‡∏°‡∏â‡∏±‡∏ï‡∏£ ‡πÅ‡∏Å‡πâ‡∏ß‡∏ö‡∏±‡∏ß‡∏î‡∏µ</option>
          <option value="21">‡∏≠‡∏ô‡∏∏‡∏ä‡∏¥‡∏ï ‡∏≠‡∏¥‡∏ô‡∏ï‡∏≤</option>
          <option value="22">‡∏¢‡∏•‡∏î‡∏≤ ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡πá‡∏ç</option>
          <option value="23">‡∏¢‡∏®‡∏Å‡∏£ ‡∏û‡∏£‡πÄ‡∏Å‡∏©‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ô‡∏û.</option>
          <option value="24">‡∏õ‡∏ê‡∏°‡∏û‡∏á‡∏®‡πå ‡∏ô‡∏¥‡∏ï‡∏¢‡πå‡∏ô‡πâ‡∏≠‡∏¢‡∏™‡∏∑‡∏ö ‡∏ô‡∏û.</option>
          <option value="3">‡∏≠‡∏£‡∏ß‡∏£‡∏£‡∏ì ‡πÄ‡∏ä‡∏≤‡∏ß‡πå‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå</option>
          <option value="5">‡∏Å‡∏¥‡∏ï‡∏ï‡∏¥‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå ‡∏ñ‡∏≤‡∏ô‡∏∏</option>
          <option value="6">‡∏´‡∏ó‡∏±‡∏¢ ‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏î‡∏¥‡∏•‡∏Å</option>
          <option value="8">‡∏®‡∏£‡∏≤‡∏ß‡∏∏‡∏ò ‡∏Å‡∏±‡∏ô‡∏™‡∏∑‡∏ö</option>
          <option value="9">‡∏≠‡∏ò‡∏¥‡∏ô‡∏±‡∏ô‡∏ó‡πå ‡∏Å‡∏≥‡πÑ‡∏•</option>
        </select>
      </div>
      <div class="item">
        <label for="department">‡πÅ‡∏ú‡∏ô‡∏Å</label>
        <select name="department" id="department">
          <option value="1">‡∏®‡∏±‡∏•‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
          <option value="2">‡∏®‡∏±‡∏•‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏õ‡∏±‡∏™‡∏™‡∏≤‡∏ß‡∏∞</option>
          <option value="3">‡∏≠‡∏≠‡∏£‡πå‡πÇ‡∏ò‡∏õ‡∏¥‡∏î‡∏¥‡∏Å‡∏™‡πå</option>
          <option value="4">‡∏™‡∏π‡∏ï‡∏¥‡∏ô‡∏£‡∏µ‡πÄ‡∏ß‡∏ä</option>
          <option value="5">‡∏ó‡∏±‡∏ô‡∏ï‡∏Å‡∏£‡∏£‡∏°</option>
          <option value="6">‡∏´‡∏π‡∏Ñ‡∏≠‡∏à‡∏°‡∏π‡∏Å</option>
          <option value="7">‡∏à‡∏±‡∏Å‡∏©‡∏∏</option>
        </select>
      </div>
      <div class="item">
        <label for="npo">NPO Time</label>
        <select name="npo" id="npo">
          <option value="1">NPO AMN</option>
          <option value="2">NPO 6.00 ‡∏ô.</option>
          <option value="3">NPO 8.00 ‡∏ô.</option>
          <option value="4">NPO 10.00 ‡∏ô.</option>
          <option value="5">NPO ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ......‡πÉ‡∏™‡πà‡πÉ‡∏ô‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</option>
          <option value="6">NO NPO</option>
        </select>
      </div>
      <div class="item">
        <label for="otype">Op Type</label>
        <select name="otype" id="otype">
          <option value="1">Elective</option>
          <option value="2">Emergency</option>
          <option value="3">Urgency</option>
          <option value="4">On call</option>
        </select>
      </div>

      <!-- üìÖ ‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ -->
      <div class="item">
        <label for="start_datetime"><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</strong></label><br>
        <input type="datetime-local" id="start_datetime" name="start_datetime">
      </div>
      <div class="item">
        <label for="end_datetime"><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</strong></label><br>
        <input type="datetime-local" id="end_datetime" name="end_datetime">
      </div>

      <!-- üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ checkbox -->
      <div class="item">
        <fieldset style="border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
          <legend><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</strong></legend>
          <label><input type="checkbox" name="comment[]" value="‡∏á‡∏î‡∏¢‡∏≤"> Consult Anes</label><br />
          <label><input type="checkbox" name="comment[]" value="‡πÅ‡∏û‡πâ‡∏¢‡∏≤"> Emer(I)</label><br />
          <label><input type="checkbox" name="comment[]" value="‡∏°‡∏µ‡∏ü‡∏±‡∏ô‡∏õ‡∏•‡∏≠‡∏°"> Emer(C)</label><br />
          <label><input type="checkbox" name="comment[]" value="‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏£‡∏†‡πå"> Emer(U)</label><br />
          <label><input type="checkbox" name="comment[]" value="‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô"> Emer(P)</label><br />
          <label><input type="checkbox" name="comment[]" value="‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏´‡∏¥‡∏ï‡∏™‡∏π‡∏á"> Emer(N)</label><br />
          <label><input type="checkbox" name="comment[]" value="‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏ß‡πÉ‡∏à"> Consult Med</label><br />
          <label><input type="checkbox" name="comment[]" value="‡∏ú‡∏• ATK Positive"> Consult Ped</label>
          <label><input type="checkbox" name="comment[]" value="‡∏ú‡∏• ATK Positive"> ‡∏à‡∏≠‡∏á ICU</label>
          <label><input type="checkbox" name="comment[]" value="‡∏ú‡∏• ATK Positive"> ‡∏à‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏î</label>
          <label><input type="checkbox" name="comment[]" value="‡∏ú‡∏• ATK Positive"> ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏û‡πâ‡∏¢‡∏≤/‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</label>
          <label><input type="checkbox" name="comment[]" value="‡∏ú‡∏• ATK Positive">
            ‡πÉ‡∏ä‡πâ‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πá‡∏á‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏î</label>
          <label><input type="checkbox" name="comment[]" value="‡∏ú‡∏• ATK Positive"> ‡πÉ‡∏ä‡πâ Flu</label>
          <label><input type="checkbox" name="comment[]" value="‡∏ú‡∏• ATK Positive">
            ‡πÉ‡∏ä‡πâ‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πá‡∏á‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏î</label>
          <label><input type="checkbox" name="comment[]" value="‡∏ú‡∏• ATK Positive"> ATK Negative</label>
          <label><input type="checkbox" name="comment[]" value="‡∏ú‡∏• ATK Positive"> ATK Positive</label>

        </fieldset>
      </div>

      

      <!-- ‚úèÔ∏è ‡∏≠‡∏∑‡πà‡∏ô‡πÜ -->
      <div class="item">
        <label for="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</label>
        <input type="text" name="other" id="other" maxlength="150">
      </div>

      <div class="item">
        <label for="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
        <select name="status" id="status">
          <option value="0">‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</option>
          <option value="1">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‡∏£‡∏≠‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</option>
          <option value="2">‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</option>
          <option value="3">OFF case</option>
          <option value="4">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</option>
          <option value="5">‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</option>
          <option value="6">PREVISIT</option>
        </select>
      </div>
    <!-- Submit -->
    <div class="item" style="margin-top: 25px;">
      <button type="submit">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>
  </fieldset>
</form>

</body>
</html>
